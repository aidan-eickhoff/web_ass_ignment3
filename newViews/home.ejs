<%- contentFor('body') %>

<!--{{#if removedUser}}-->
<% if (locals.removedUser) { %>
<div class="alert alert-success alert-dismissible fade show" role="alert">
<!--    User with first name {{removedUser}} has been removed.-->
    User with first name <%- removedUser %> has been removed.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<% } %>
<!--{{/if}}-->

<div class="row">
    <div class="col-6">
        <h1>Users</h1>
    </div>
    <div class="col-6 d-flex justify-content-end">
        <a href="/adduser" type="button" class="btn btn-primary align-self-center">+ add user</a>
    </div>
</div>

<table class="table table-bordered">
    <thead class="thead-dark">
    <tr>
        <th scope="col">#</th>
        <th scope="col">First Name</th>
        <th scope="col">Last Name</th>
        <th scope="col">Email</th>
        <th scope="col">Phone</th>
        <th scope="col">Status</th>
        <th scope="col" class="text-end">Action</th>
    </tr>
    </thead>
    <tbody>

<!--    {{#each users}}-->
    <% users.forEach(function (user) { %>
        <% if (user.status.toLowerCase() !== 'active') { %>
        <tr>
        <% } else { %>
        <tr class="bg-success">
        <% } %>
<!--        <th scope="row">{{this.id}}</th>-->
        <th scope="row"><%- user.id %></th>
<!--        <td>{{this.first_name}}</td>-->
        <td><%- user.first_name %></td>
<!--        <td>{{this.last_name}}</td>-->
        <td><%- user.last_name %></td>
<!--        <td>{{this.email}}</td>-->
        <td><%- user.email %></td>
<!--        <td>{{this.phone}}</td>-->
        <td><%- user.phone %></td>
        <td>
            <% if (user.status !== 'Active' && user.status !== 'active') { %>
                <a href="activateuser/<%- user.id %>" type="button" class="btn btn-light btn-small"><i class="bi bi-play"> Activate</i></a>
            <% } else { %>
                <a href="deactivateuser/<%- user.id %>" type="button" class="btn btn-light btn-small"><i class="bi bi-play"> Deactivate</i></a>
            <% } %>
        </td>
        <td class="text-end">
<!--            <a href="/viewuser/{{this.id}}" type="button" class="btn btn-light btn-small"><i class="bi bi-eye"></i> View</a>-->
            <a href="/viewuser/<%-user.id%>" type="button" class="btn btn-light btn-small"><i class="bi bi-eye"></i> View</a>
            <a href="/edituser/<%-user.id%>" type="button" class="btn btn-light btn-small"><i class="bi bi-pencil"></i>
                Edit</a>
            <a href="/<%-user.id%>" type="button" class="btn btn-light btn-small"><i class="bi bi-person-x"></i> Delete</a>
        </td>
    </tr>
    <% }); %>
<!--    {{/each}}-->

    </tbody>
</table>